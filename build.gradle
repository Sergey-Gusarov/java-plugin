
buildscript {
    apply from: 'project.gradle', to: buildscript
    copy {
        from zipTree(buildscript.configurations.classpath.files.find { it.name.contains('gradle-project-plugin') })
        into 'tmp'
        include 'gradle-scripts/**'
        exclude {
            def target = new File("tmp/${it.relativePath}")
            if (!target.exists()) {
                return false
            }
            return target.directory || it.file.text.hashCode() == target.text.hashCode()
        }
    }
}
apply from: 'tmp/gradle-scripts/_root.gradle'
/////////////////////////////////////////////

checkWithKtLint.onlyIf { false }

pluginId = 'yamoney-java-module-plugin'
gradlePlugin {
    plugins {
        javaModulePlugin {
            id = 'yamoney-java-module-plugin'
            implementationClass = 'ru.yandex.money.gradle.plugins.backend.build.JavaModulePlugin'
        }
    }
}

dependencies {

    optional 'com.google.code.findbugs:annotations:3.0.1'

    compile localGroovy(),
            'org.eclipse.jgit:org.eclipse.jgit:5.3.0.201903130848-r',
            'org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.61',
            'ru.yandex.money.gradle.plugins:yamoney-check-dependencies-plugin:4.4.3'

    testImplementation gradleTestKit(),
            'com.netflix.nebula:nebula-test:7.2.1',
            'ru.yandex.money.common:yamoney-test-utils:22.3.0',
            'org.mockito:mockito-core:2.23.0',
            'org.testng:testng:6.14.3'
}
